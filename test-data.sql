-- Script de datos de prueba para sistema de gestión
-- Ejecutar en Supabase SQL Editor

-- 1. Limpiar datos existentes (opcional - descomenta si necesitas empezar desde cero)
-- DELETE FROM ventas;
-- DELETE FROM compras;
-- DELETE FROM products WHERE sku LIKE 'TEST-%';

-- 2. PRODUCTOS DE PRUEBA
INSERT INTO products (sku, descripcion, stock_actual, costo_fob_rmb, cbm, link, status) VALUES
-- Productos con stock normal
('TEST-001', 'Auriculares Bluetooth Premium', 45, 25.50, 0.02, 'https://example.com/auriculares', 'NEEDS_REPLENISHMENT'),
('TEST-002', 'Mouse Gaming RGB', 120, 18.75, 0.015, 'https://example.com/mouse', 'QUOTED'),
('TEST-003', 'Teclado Mecánico', 0, 45.00, 0.08, 'https://example.com/teclado', 'ANALYZING'),
('TEST-004', 'Webcam 4K', 85, 32.25, 0.025, 'https://example.com/webcam', 'PURCHASE_APPROVED'),
('TEST-005', 'Cargador Inalámbrico', 200, 12.50, 0.01, 'https://example.com/cargador', 'SHIPPED'),

-- Productos con diferentes situaciones de stock
('TEST-006', 'Altavoz Portátil', 0, 28.00, 0.035, 'https://example.com/altavoz', 'NEEDS_REPLENISHMENT'),
('TEST-007', 'Cable USB-C Premium', 500, 3.75, 0.005, 'https://example.com/cable', 'QUOTED'),
('TEST-008', 'Soporte para Laptop', 15, 22.50, 0.12, 'https://example.com/soporte', 'MANUFACTURED'),
('TEST-009', 'Hub USB 7 Puertos', 0, 15.25, 0.02, 'https://example.com/hub', 'QUOTE_REJECTED'),
('TEST-010', 'Luz LED para Monitor', 75, 19.80, 0.03, 'https://example.com/luz', 'PURCHASE_CONFIRMED');

-- 3. COMPRAS DE PRUEBA (con diferentes fechas de llegada)
INSERT INTO compras (sku, cantidad, fecha_compra, fecha_llegada_estimada, fecha_llegada_real, status_compra) VALUES
-- Compras ya llegadas (con fecha_llegada_real)
('TEST-001', 100, '2025-07-15 10:00:00', '2025-08-15 00:00:00', '2025-08-10 14:30:00', 'llegado'),
('TEST-002', 200, '2025-06-20 09:00:00', '2025-07-20 00:00:00', '2025-07-18 16:45:00', 'llegado'),
('TEST-003', 150, '2025-05-10 11:30:00', '2025-06-10 00:00:00', '2025-06-08 09:15:00', 'llegado'),
('TEST-004', 120, '2025-07-01 14:20:00', '2025-08-01 00:00:00', '2025-07-28 11:20:00', 'llegado'),
('TEST-005', 300, '2025-06-05 08:15:00', '2025-07-05 00:00:00', '2025-07-03 13:40:00', 'llegado'),

-- Compras anteriores (para productos que ya se agotaron)
('TEST-006', 80, '2025-04-15 10:00:00', '2025-05-15 00:00:00', '2025-05-12 15:30:00', 'llegado'),
('TEST-009', 60, '2025-03-20 12:00:00', '2025-04-20 00:00:00', '2025-04-18 10:45:00', 'llegado'),

-- Compras en tránsito (sin fecha_llegada_real)
('TEST-007', 250, '2025-08-15 09:00:00', '2025-09-15 00:00:00', NULL, 'en_transito'),
('TEST-008', 80, '2025-08-20 11:00:00', '2025-09-20 00:00:00', NULL, 'en_transito'),
('TEST-010', 100, '2025-08-25 13:00:00', '2025-09-25 00:00:00', NULL, 'en_transito');

-- 4. VENTAS HISTÓRICAS (diferentes patrones de venta)
-- Ventas para TEST-001 (patrón regular desde llegada)
INSERT INTO ventas (sku, cantidad, fecha_venta) VALUES
('TEST-001', 2, '2025-08-11 10:30:00'),
('TEST-001', 3, '2025-08-12 14:15:00'),
('TEST-001', 1, '2025-08-13 09:45:00'),
('TEST-001', 2, '2025-08-14 16:20:00'),
('TEST-001', 4, '2025-08-15 11:10:00'),
('TEST-001', 2, '2025-08-16 13:30:00'),
('TEST-001', 3, '2025-08-17 08:45:00'),
('TEST-001', 1, '2025-08-18 15:20:00'),
('TEST-001', 2, '2025-08-19 10:15:00'),
('TEST-001', 3, '2025-08-20 14:40:00'),
('TEST-001', 2, '2025-08-21 09:30:00'),
('TEST-001', 1, '2025-08-22 16:15:00'),
('TEST-001', 3, '2025-08-23 11:45:00'),
('TEST-001', 2, '2025-08-24 13:20:00'),
('TEST-001', 4, '2025-08-25 08:30:00'),
('TEST-001', 2, '2025-08-26 15:45:00'),
('TEST-001', 3, '2025-08-27 10:20:00'),
('TEST-001', 1, '2025-08-28 14:35:00'),
('TEST-001', 2, '2025-08-29 09:50:00'),
('TEST-001', 3, '2025-08-30 12:15:00');

-- Ventas para TEST-002 (alta demanda desde llegada)
INSERT INTO ventas (sku, cantidad, fecha_venta) VALUES
('TEST-002', 5, '2025-07-19 09:00:00'),
('TEST-002', 7, '2025-07-20 11:30:00'),
('TEST-002', 4, '2025-07-21 14:15:00'),
('TEST-002', 6, '2025-07-22 08:45:00'),
('TEST-002', 8, '2025-07-23 16:20:00'),
('TEST-002', 5, '2025-07-24 10:30:00'),
('TEST-002', 6, '2025-07-25 13:45:00'),
('TEST-002', 4, '2025-07-26 09:15:00'),
('TEST-002', 7, '2025-07-27 15:30:00'),
('TEST-002', 5, '2025-07-28 11:45:00'),
('TEST-002', 6, '2025-07-29 14:20:00'),
('TEST-002', 8, '2025-07-30 08:30:00'),
('TEST-002', 4, '2025-07-31 16:45:00'),
('TEST-002', 5, '2025-08-01 10:15:00'),
('TEST-002', 7, '2025-08-02 13:30:00'),
('TEST-002', 6, '2025-08-03 09:45:00'),
('TEST-002', 4, '2025-08-04 15:15:00'),
('TEST-002', 8, '2025-08-05 11:30:00'),
('TEST-002', 5, '2025-08-06 14:45:00'),
('TEST-002', 6, '2025-08-07 08:20:00'),
('TEST-002', 7, '2025-08-08 16:35:00'),
('TEST-002', 4, '2025-08-09 10:50:00'),
('TEST-002', 5, '2025-08-10 13:15:00'),
('TEST-002', 6, '2025-08-11 09:30:00'),
('TEST-002', 8, '2025-08-12 15:45:00'),
('TEST-002', 4, '2025-08-13 11:20:00'),
('TEST-002', 7, '2025-08-14 14:35:00'),
('TEST-002', 5, '2025-08-15 08:50:00'),
('TEST-002', 6, '2025-08-16 16:15:00'),
('TEST-002', 4, '2025-08-17 10:30:00'),
('TEST-002', 8, '2025-08-18 13:45:00'),
('TEST-002', 5, '2025-08-19 09:20:00'),
('TEST-002', 7, '2025-08-20 15:35:00'),
('TEST-002', 6, '2025-08-21 11:50:00'),
('TEST-002', 4, '2025-08-22 14:15:00'),
('TEST-002', 5, '2025-08-23 08:30:00'),
('TEST-002', 8, '2025-08-24 16:45:00'),
('TEST-002', 6, '2025-08-25 10:20:00'),
('TEST-002', 7, '2025-08-26 13:35:00'),
('TEST-002', 4, '2025-08-27 09:50:00'),
('TEST-002', 5, '2025-08-28 15:15:00'),
('TEST-002', 6, '2025-08-29 11:30:00'),
('TEST-002', 8, '2025-08-30 14:45:00');

-- Ventas para TEST-003 (se agotó - stock 0)
INSERT INTO ventas (sku, cantidad, fecha_venta) VALUES
('TEST-003', 8, '2025-06-09 10:00:00'),
('TEST-003', 10, '2025-06-10 14:30:00'),
('TEST-003', 6, '2025-06-11 09:15:00'),
('TEST-003', 12, '2025-06-12 16:45:00'),
('TEST-003', 9, '2025-06-13 11:20:00'),
('TEST-003', 7, '2025-06-14 13:50:00'),
('TEST-003', 11, '2025-06-15 08:30:00'),
('TEST-003', 8, '2025-06-16 15:15:00'),
('TEST-003', 10, '2025-06-17 10:45:00'),
('TEST-003', 6, '2025-06-18 14:20:00'),
('TEST-003', 9, '2025-06-19 09:35:00'),
('TEST-003', 12, '2025-06-20 16:10:00'),
('TEST-003', 7, '2025-06-21 11:55:00'),
('TEST-003', 8, '2025-06-22 13:25:00'),
('TEST-003', 11, '2025-06-23 08:40:00'),
('TEST-003', 10, '2025-06-24 15:30:00'),
('TEST-003', 6, '2025-06-25 10:15:00'),
('TEST-003', 9, '2025-06-26 14:50:00');

-- Ventas para TEST-004 (venta moderada)
INSERT INTO ventas (sku, cantidad, fecha_venta) VALUES
('TEST-004', 3, '2025-07-29 09:30:00'),
('TEST-004', 2, '2025-07-30 14:15:00'),
('TEST-004', 4, '2025-07-31 10:45:00'),
('TEST-004', 3, '2025-08-01 16:20:00'),
('TEST-004', 2, '2025-08-02 11:35:00'),
('TEST-004', 5, '2025-08-03 13:50:00'),
('TEST-004', 3, '2025-08-04 08:25:00'),
('TEST-004', 4, '2025-08-05 15:40:00'),
('TEST-004', 2, '2025-08-06 10:55:00'),
('TEST-004', 3, '2025-08-07 14:10:00'),
('TEST-004', 4, '2025-08-08 09:25:00'),
('TEST-004', 2, '2025-08-09 16:40:00'),
('TEST-004', 5, '2025-08-10 11:15:00'),
('TEST-004', 3, '2025-08-11 13:30:00'),
('TEST-004', 2, '2025-08-12 08:45:00'),
('TEST-004', 4, '2025-08-13 15:20:00'),
('TEST-004', 3, '2025-08-14 10:35:00'),
('TEST-004', 2, '2025-08-15 14:50:00'),
('TEST-004', 5, '2025-08-16 09:15:00'),
('TEST-004', 3, '2025-08-17 16:30:00'),
('TEST-004', 4, '2025-08-18 11:45:00'),
('TEST-004', 2, '2025-08-19 13:20:00'),
('TEST-004', 3, '2025-08-20 08:35:00'),
('TEST-004', 4, '2025-08-21 15:50:00'),
('TEST-004', 2, '2025-08-22 10:25:00'),
('TEST-004', 5, '2025-08-23 14:40:00'),
('TEST-004', 3, '2025-08-24 09:55:00'),
('TEST-004', 2, '2025-08-25 16:10:00'),
('TEST-004', 4, '2025-08-26 11:25:00'),
('TEST-004', 3, '2025-08-27 13:40:00'),
('TEST-004', 2, '2025-08-28 08:15:00'),
('TEST-004', 5, '2025-08-29 15:30:00'),
('TEST-004', 3, '2025-08-30 10:45:00');

-- Ventas para TEST-005 (alta rotación)
INSERT INTO ventas (sku, cantidad, fecha_venta) VALUES
('TEST-005', 12, '2025-07-04 08:00:00'),
('TEST-005', 15, '2025-07-05 10:30:00'),
('TEST-005', 10, '2025-07-06 13:45:00'),
('TEST-005', 18, '2025-07-07 09:15:00'),
('TEST-005', 14, '2025-07-08 16:20:00'),
('TEST-005', 11, '2025-07-09 11:35:00'),
('TEST-005', 16, '2025-07-10 14:50:00'),
('TEST-005', 13, '2025-07-11 08:25:00'),
('TEST-005', 12, '2025-07-12 15:40:00'),
('TEST-005', 17, '2025-07-13 10:55:00'),
('TEST-005', 14, '2025-07-14 13:10:00'),
('TEST-005', 11, '2025-07-15 09:25:00'),
('TEST-005', 15, '2025-07-16 16:40:00'),
('TEST-005', 13, '2025-07-17 11:15:00'),
('TEST-005', 12, '2025-07-18 14:30:00'),
('TEST-005', 16, '2025-07-19 08:45:00'),
('TEST-005', 14, '2025-07-20 15:20:00'),
('TEST-005', 10, '2025-07-21 10:35:00'),
('TEST-005', 18, '2025-07-22 13:50:00'),
('TEST-005', 15, '2025-07-23 09:15:00'),
('TEST-005', 12, '2025-07-24 16:30:00'),
('TEST-005', 17, '2025-07-25 11:45:00'),
('TEST-005', 14, '2025-07-26 14:20:00'),
('TEST-005', 11, '2025-07-27 08:35:00'),
('TEST-005', 16, '2025-07-28 15:50:00'),
('TEST-005', 13, '2025-07-29 10:25:00'),
('TEST-005', 15, '2025-07-30 13:40:00'),
('TEST-005', 12, '2025-07-31 09:55:00'),
('TEST-005', 18, '2025-08-01 16:10:00'),
('TEST-005', 14, '2025-08-02 11:25:00'),
('TEST-005', 17, '2025-08-03 14:40:00'),
('TEST-005', 13, '2025-08-04 08:15:00'),
('TEST-005', 16, '2025-08-05 15:30:00'),
('TEST-005', 11, '2025-08-06 10:45:00'),
('TEST-005', 15, '2025-08-07 14:20:00'),
('TEST-005', 12, '2025-08-08 09:35:00'),
('TEST-005', 18, '2025-08-09 16:50:00'),
('TEST-005', 14, '2025-08-10 11:15:00'),
('TEST-005', 17, '2025-08-11 13:30:00'),
('TEST-005', 13, '2025-08-12 08:45:00'),
('TEST-005', 16, '2025-08-13 15:20:00'),
('TEST-005', 11, '2025-08-14 10:35:00'),
('TEST-005', 15, '2025-08-15 14:50:00'),
('TEST-005', 12, '2025-08-16 09:25:00'),
('TEST-005', 18, '2025-08-17 16:40:00'),
('TEST-005', 14, '2025-08-18 11:55:00'),
('TEST-005', 17, '2025-08-19 13:10:00'),
('TEST-005', 13, '2025-08-20 08:25:00'),
('TEST-005', 16, '2025-08-21 15:40:00'),
('TEST-005', 11, '2025-08-22 10:55:00'),
('TEST-005', 15, '2025-08-23 14:10:00'),
('TEST-005', 12, '2025-08-24 09:25:00'),
('TEST-005', 18, '2025-08-25 16:40:00'),
('TEST-005', 14, '2025-08-26 11:15:00'),
('TEST-005', 17, '2025-08-27 13:30:00'),
('TEST-005', 13, '2025-08-28 08:45:00'),
('TEST-005', 16, '2025-08-29 15:20:00'),
('TEST-005', 11, '2025-08-30 10:35:00');

-- Ventas para TEST-006 (producto agotado - última venta fue el quiebre)
INSERT INTO ventas (sku, cantidad, fecha_venta) VALUES
('TEST-006', 4, '2025-05-13 10:00:00'),
('TEST-006', 6, '2025-05-14 14:30:00'),
('TEST-006', 3, '2025-05-15 09:15:00'),
('TEST-006', 8, '2025-05-16 16:45:00'),
('TEST-006', 5, '2025-05-17 11:20:00'),
('TEST-006', 7, '2025-05-18 13:50:00'),
('TEST-006', 4, '2025-05-19 08:30:00'),
('TEST-006', 6, '2025-05-20 15:15:00'),
('TEST-006', 9, '2025-05-21 10:45:00'),
('TEST-006', 5, '2025-05-22 14:20:00'),
('TEST-006', 8, '2025-05-23 09:35:00'),
('TEST-006', 6, '2025-05-24 16:10:00'),
('TEST-006', 4, '2025-05-25 11:55:00'),
('TEST-006', 7, '2025-05-26 13:25:00'),
('TEST-006', 5, '2025-05-27 08:40:00'),
('TEST-006', 9, '2025-05-28 15:30:00'),
('TEST-006', 3, '2025-05-29 10:15:00'),
('TEST-006', 6, '2025-05-30 14:50:00'),
('TEST-006', 8, '2025-05-31 09:25:00'),
('TEST-006', 4, '2025-06-01 16:40:00');

-- Ventas para TEST-009 (producto sin stock - última venta antigua)
INSERT INTO ventas (sku, cantidad, fecha_venta) VALUES
('TEST-009', 3, '2025-04-19 09:30:00'),
('TEST-009', 5, '2025-04-20 14:15:00'),
('TEST-009', 4, '2025-04-21 10:45:00'),
('TEST-009', 6, '2025-04-22 16:20:00'),
('TEST-009', 2, '2025-04-23 11:35:00'),
('TEST-009', 8, '2025-04-24 13:50:00'),
('TEST-009', 3, '2025-04-25 08:25:00'),
('TEST-009', 5, '2025-04-26 15:40:00'),
('TEST-009', 4, '2025-04-27 10:55:00'),
('TEST-009', 7, '2025-04-28 14:10:00'),
('TEST-009', 6, '2025-04-29 09:25:00'),
('TEST-009', 3, '2025-04-30 16:40:00'),
('TEST-009', 5, '2025-05-01 11:15:00'),
('TEST-009', 8, '2025-05-02 13:30:00'),
('TEST-009', 4, '2025-05-03 08:45:00'),
('TEST-009', 6, '2025-05-04 15:20:00'),
('TEST-009', 2, '2025-05-05 10:35:00'),
('TEST-009', 7, '2025-05-06 14:50:00');

-- 5. RESUMEN DE DATOS CREADOS
/*
PRODUCTOS TEST CREADOS:
- TEST-001: Stock 45, llegada real 10-ago, ventas regulares (2.5/día aprox)
- TEST-002: Stock 120, llegada real 18-jul, alta demanda (5.7/día aprox)  
- TEST-003: Stock 0, llegada real 8-jun, agotado (última venta 26-jun)
- TEST-004: Stock 85, llegada real 28-jul, venta moderada (3.2/día aprox)
- TEST-005: Stock 200, llegada real 3-jul, alta rotación (14.8/día aprox)
- TEST-006: Stock 0, llegada real 12-may, agotado (última venta 1-jun)
- TEST-007: Stock 500, sin llegada real, en tránsito
- TEST-008: Stock 15, sin llegada real, en tránsito  
- TEST-009: Stock 0, llegada real 18-abr, agotado (última venta 6-may)
- TEST-010: Stock 75, sin llegada real, en tránsito

ESCENARIOS DE PRUEBA:
1. Cálculo con fechas reales (TEST-001 a TEST-006)
2. Productos agotados con última venta (TEST-003, TEST-006, TEST-009)
3. Productos en tránsito sin llegada real (TEST-007, TEST-008, TEST-010)
4. Diferentes patrones de venta (baja, moderada, alta)
5. Diferentes estados del workflow
*/

-- Para verificar los datos insertados:
SELECT 'PRODUCTOS' as tipo, count(*) as cantidad FROM products WHERE sku LIKE 'TEST-%'
UNION ALL
SELECT 'COMPRAS' as tipo, count(*) as cantidad FROM compras WHERE sku LIKE 'TEST-%'  
UNION ALL
SELECT 'VENTAS' as tipo, count(*) as cantidad FROM ventas WHERE sku LIKE 'TEST-%';